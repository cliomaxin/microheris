function essentialCountdownCloseAnnouncementBar(e,t){let n=document.querySelector(`.countdown_annoucement_bar_wrapper_${e}`);if(n){n.parentNode.removeChild(n);try{window.localStorage.setItem("countdownTimerAnnoucementBarClosed",JSON.stringify({value:!0,id:e,updatedAt:t}))}catch(o){console.log(o)}}}function essentialCountdownCloseAnnouncementBarOnClick(e,t){!e.target.closest("button")&&t&&(window.location.href=t)}async function getCartEssentialApps(){let e=await fetch(window.Shopify.routes.root+"cart.js",{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e).catch(e=>{console.error("Error:",e)});return e}function clearCartEssentialApps(e){fetch(window.Shopify.routes.root+"cart/clear.js",{method:"POST",headers:{"Content-Type":"application/json"}}).then(()=>{try{window.localStorage.removeItem(`essentialCountdownTimer-${e.id}`)}catch(t){console.log(t)}let n=window.location&&window.location.pathname.includes("/cart");(n||window.cartTimerObserver)&&location.reload()}).catch(e=>{console.error("Error:",e)})}!function(){let e=null,t=window.essentialCountdownTimerMeta;async function n(){let t=window.Shopify?window.Shopify.shop:window.location.origin,n=window.essentialCountdownTimerConfigs,o=`https://cache-essential-apps.cc/config/${t}`;if(n){let r=n.find(e=>e.locationType&&"on-countries"===e.locationType);return r&&await fetch("https://cache-essential-apps.cc/config/geolocation").then(t=>{t.headers.has("country")&&(e=t.headers.get("country"))}),new Promise(e=>{e(n)})}return fetch(o).then(t=>(t.headers.has("country")&&(e=t.headers.get("country")),t.json()))}function o(e){let t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id","countdown_timer"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function r(){if(window.essentialViewCounted)return;window.essentialViewCounted=!0;let e=window.Shopify?window.Shopify.shop:window.location.origin,t=document.querySelectorAll(".essential_countdown_timer"),n=t&&t.length>0?t.length:0;e&&0!==n&&fetch("https://essential-apps-analytics.herokuapp.com/post_event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:e,views:n})})}function i(e){return""!==e.font&&e.font?`font-family: ${e.font};
`:""}function a(e,t){let n=e.style;return`
      .countdown_wrapper_${e.id} {
          display: grid;
          ${b(e)?"grid-template-columns: 1fr 10px 1fr 10px 1fr;":"grid-template-columns: 1fr 10px 1fr 10px 1fr 10px 1fr;"} 
          ${"top-bar"===t?"row-gap: 0;":"row-gap: 6px;"}  
          justify-items: center;
          align-items: center;
          column-gap: 5px;
          direction: ltr;
          ${"top-bar"===t?"column-gap: 2px;":"padding-top: 4px;"}
          ${"top-bar"!==t&&!e.subheading&&!e.title&&"padding-top: 0;"}
      }

      .countdown_time_${e.id} {
          ${i(n)}color: ${n.timerColor};
          font-weight: bold;
          font-size: ${n.timerSize}px;
          line-height: 1;
          font-feature-settings: 'tnum';
          font-variant-numeric: tabular-nums;
          ${"top-bar"!==t&&(e.subheading||e.title)&&"padding-top: 4px;"}
      }

      .countdown_legend_${e.id} {
          ${i(n)}color: ${n.legendColor};
          font-size: ${n.legendSize}px;
          padding-right: 10px;
          grid-column: 2 span;
          line-height: 1;
      }

      .countdown_legend_${e.id}.last {
        grid-column: auto;
        padding-right: 0;
      }`}function l(e){let t=e.style,n="gradientBackground"===t.backgroundType?`linear-gradient(${t.gradientTurn}deg, ${t.gradientStart}, ${t.gradientEnd})`:t.singleColor,r=`
        .countdown_timer_wrapper_${e.id} {
            display: flex;
            flex-flow: column;
            ${i(t)}background: ${n};
            ${void 0!==t.insideTopSpacing?`margin-top: ${t.outsideTopSpacing}px;
                   margin-bottom: ${t.outsideBottomSpacing}px;
                   padding-top: ${t.insideTopSpacing}px;
                   padding-bottom: ${t.insideBottomSpacing}px;
                `:`margin: 20px 0;
                   padding: 30px;`}
            border-radius: ${t.borderRadius}px;
            border: ${t.borderColor} solid ${t.borderSize}px;
            text-align: center;
            flex:auto;
            align-items: center;
        }

        .countdown_timer_wrapper_${e.id}.clickable {
          cursor: pointer;
        }
    
        .countdown_timer_wrapper_${e.id} h2 {
            ${i(t)}font-weight: bold;
            font-size: ${t.titleSize}px;
            color: ${t.titleColor};
            margin: 0;
            padding: 0;
            line-height: 1.2;
            letter-spacing: normal;
            text-transform: none;
        }
    
        .countdown_timer_subheading_${e.id} {
            ${i(t)}font-size: ${t.subheadingSize}px;
            color: ${t.subheadingColor};
            line-height: 1.2;
            letter-spacing: normal;
            padding: 0;
            padding-top: 2px;
            margin: 0;
        }

        .countdown_timer_bar_cta_${e.id}, .countdown_timer_bar_cta_${e.id}:visited {
          display: block;        
          cursor: pointer;
          text-decoration: none;
          background: ${t.buttonBackgroundColor};
          border: 0;
          white-space: nowrap;
          padding: 8px 16px;
          line-height: 1.5;
          border-radius: ${t.buttonBorderRadius}px;
          font-size: ${t.buttonFontSize}px;
          color: ${t.buttonFontColor};
          margin-top: 16px;
        }
    
        ${a(e,"product-page")}
    `;o(r)}function d(e){return 1===e.toString().length?`0${e}`:e}function c(e,t,n,o=null){let r,i=new Date(e+6e4*n.fixedMinutes),a=new Date().getTime();if("toDate"===n.timerType)r=new Date(n.endDate)-a;else if("recurring"===n.timerType){let l=new Date(n.endDate)-a;if("never"!==n.endType&&l<0)r=l;else{let c=C(n.startDate),s=C(n.endDate);r=c<s?s-a:s.getTime()>a?s-a:c.getTime()>a?0:s.getTime()+864e5-a}}else{r=t?i-(6e4*n.fixedMinutes-t)-a:i-a;try{"cart-page"===n.type&&o.item_count>0&&window.localStorage.setItem(`essentialCountdownTimer-${n.id}`,JSON.stringify({id:n.id,userDistance:r,sessionCurrentDate:new Date().getTime(),updatedAt:n.updatedAt})),"cart-page"!==n.type&&window.localStorage.setItem(`essentialCountdownTimer-${n.id}`,`${r}, ${new Date().getTime()}, ${n.timerType}-${n.fixedMinutes}-${n.id}`)}catch(p){console.log(p)}}if(r<0){if("custom-title"===n.onceItEnds){var u;let m,g;"product-page"===(u=n).type||"landing-page"===u.type?(m=document.querySelector(`.countdown_timer_wrapper_${u.id} h2`),g=document.querySelector(`.countdown_timer_subheading_${u.id}`)):(m=document.querySelector(`.countdown_annoucement_bar_title_${u.id}`),g=document.querySelector(`.countdown_annoucement_bar_subheading_${u.id}`)),g&&g.remove(),m&&(m.textContent=u.customTitle)}if("hide"===n.onceItEnds||""===n.onceItEnds||"delete-items"===n.onceItEnds){let $;"product-page"===n.type||"landing-page"===n.type?$=document.querySelector(`.countdown_timer_wrapper_${n.id}`):"cart-page"===n.type?(window.cartTimerObserver&&window.cartTimerObserver.disconnect(),$=document.querySelector(`.countdown_cart_page_timer_wrapper_${n.id}`)):$=document.querySelector(`.countdown_annoucement_bar_wrapper_${n.id}`),$&&$.remove()}"delete-items"===n.onceItEnds&&"cart-page"===n.type&&o.item_count>0&&clearCartEssentialApps(n);return}let f=Math.floor(r/864e5);f=d(f);let h=Math.floor(r%864e5/36e5);h=d(h);let w=Math.floor(r%36e5/6e4);w=d(w);let y=Math.floor(r%6e4/1e3);return y=d(y),b(n)?{hours:h,minutes:w,seconds:y}:{days:f,hours:h,minutes:w,seconds:y}}function s(e,t){let n=Number(new Date().getTime()),o,i,a,l;try{a=window.localStorage.getItem(`essentialCountdownTimer-${t.id}`)}catch(d){console.log(d)}a&&([o,i,l]=a&&a.split(","),-1===l.indexOf(`${t.timerType}-${t.fixedMinutes}-${t.id}`)&&(a=null,o=null)),a&&parseInt(i)+6e4*t.fixedMinutes>n&&(n=parseInt(i)),p(c(n,o,t),e,t),setTimeout(()=>{r()},700);let s=setInterval(()=>{let r=c(n,o,t);(t.repeat||"repeat"===t.onceItEnds)&&"fixedMinutes"===t.timerType&&!r?(o=0,n=Number(new Date().getTime())):r||clearInterval(s),p(c(n,o,t),e,t)},1e3)}function p(e,t,n){let o=document.createElement("div");o.className=`countdown_wrapper_${n.id} essential_countdown_timer notranslate`,e||(e=b(n)?{hours:"00",minutes:"00",seconds:"00"}:{days:"00",hours:"00",minutes:"00",seconds:"00"}),Object.values(e).forEach((e,t)=>{let r=document.createElement("span");r.className=`countdown_time_${n.id}`,r.textContent=e;let i=r.cloneNode(!0);i.textContent=":",o.append(r);let a=b(n)?2:3;t!==a&&o.append(i)}),t.innerHTML="",function e(t,n,o){let r=b(o)?[o.legendCopyHours,o.legendCopyMins,o.legendCopySecs]:[o.legendCopyDays,o.legendCopyHours,o.legendCopyMins,o.legendCopySecs,];r.forEach((e,n)=>{let r=document.createElement("div");r.className=`countdown_legend_${o.id}`;let i=b(o)?2:3;n===i&&(r.className=`countdown_legend_${o.id} last`),r.textContent=e,t.append(r)}),n.append(t)}(o,t,n),t.append(o)}function u(e,t,n){let o=document.createElement("div");o.className="cart-page-inline-timer h2";let r=document.createElement("span");var i,a,l="{timer}";e||(e={days:"00",hours:"00",minutes:"00",seconds:"00"}),Object.values(e).forEach((e,t)=>{if(0===t&&"00"===e||1===t&&"00"===e)return;let o=document.createElement("span");o.className=`countdown_time_${n.id}`,o.textContent=e;let i=o.cloneNode(!0);i.textContent=":",r.append(o),3!==t&&r.append(i)}),t.innerHTML="",o.innerHTML+=(i=n.title,a=r,i.replace(l,a.outerHTML)),t.append(o)}function m(e,t=null){let n=document.querySelector(".essential_countdown_annoucement_bar_wrapper");if(n&&!t)return;try{let r=window.localStorage.getItem("countdownTimerAnnoucementBarClosed");if((r=JSON.parse(r))&&r.id===e.id&&r.updatedAt===e.updatedAt&&r.value)return}catch(l){console.log(l)}if(e.timerPlacement){let d=window.location.pathname,c=window.Shopify.routes.root||"/",p=c;if(c.length>1&&(c=c.slice(0,c.length-1)),"home-page"===e.timerPlacement&&d!==c&&d!==p||"all-products"===e.timerPlacement&&!window.location.pathname.includes("/products/")||"all-collections"===e.timerPlacement&&(!window.location.pathname.includes("/collections/")||window.location.pathname.includes("/products/")))return}!function e(t){let n=t.style,r="gradientBackground"===n.backgroundType?`linear-gradient(${n.gradientTurn}deg, ${n.gradientStart}, ${n.gradientEnd})`:n.singleColor,l=`
        .countdown_annoucement_bar_wrapper_${t.id} {
          position: relative;
          ${i(n)}background: ${r};
          z-index: ${!t.createdAt||1697704508e3>new Date(t.createdAt).getTime()?100:1};
          display: flex !important;
          width: 100%;
          flex-wrap: wrap;
          ${"seperate-centered"===n.announcementBarStyle?`flex-flow: column;
              justify-items: center;`:""}

          align-items: center;
          justify-content: center;
          padding: 10px;
          column-gap: 26px;
          row-gap: 10px;
          border-bottom: ${n.borderColor} solid ${n.borderSize}px;
        }

        .countdown_annoucement_bar_wrapper_${t.id}.top_page {
          position: sticky; 
          top: 0;
        }

        .countdown_annoucement_bar_wrapper_${t.id}.bottom_page {
          bottom: 0; 
          left: 0;
          position: fixed;
          width: 100%;
          border-bottom: none;
          border-top: ${n.borderColor} solid ${n.borderSize}px;
        }
        
        .countdown_annoucement_bar_wrapper_${t.id}.clickable {
          cursor: pointer;
        }
    
        .countdown_annoucement_bar_title_${t.id}.h2 {
            ${i(n)}font-weight: bold;
            font-size: ${n.titleSize}px;
            color: ${n.titleColor};
            margin: 0;
            padding: 0;
            line-height: 1.2;
            letter-spacing: normal;
            text-transform: none;
            text-align: left;
        }
    
        .countdown_annoucement_bar_subheading_${t.id} {
            ${i(n)}font-size: ${n.subheadingSize}px;
            color: ${n.subheadingColor};
            line-height: 1.2;
            letter-spacing: normal;
            padding: 0;
            margin: 0;
        }
        
        .countdown_annoucement_bar_cta_${t.id}, .countdown_annoucement_bar_cta_${t.id}:visited  {
          display: block;        
          cursor: pointer;
          text-decoration: none;
          background: ${n.buttonBackgroundColor};
          border: 0;
          white-space: nowrap;
          padding: 8px 16px;
          line-height: 1.5;
          border-radius: ${n.buttonBorderRadius}px;
          font-size: ${n.buttonFontSize}px;
          color: ${n.buttonFontColor};
        }

        .countdown_annoucement_bar_close_button_${t.id} {
          position: absolute;
          display: block;
          border: none;
          background: none;
          padding: 6px;
          cursor: pointer;
          top: 50%;
          right: 10px;
          transform: translate(0, -50%);
        }

        .countdown_annoucement_bar_close_button_${t.id} svg {
          width: 12px;
          height: 12px;
          display: block;
        }

        .countdown_annoucement_bar_close_button_${t.id}.top_right {
          position: absolute;
          top: 20px;
          right: 20px;
        }

        ${(e=>{if(!e.createdAt||1697704508e3>new Date(e.createdAt).getTime())return"";let t=!e.legendCopyDays&&!e.legendCopyHours&&!e.legendCopyMins&&!e.legendCopySecs;return`
        @media (max-width: 620px) {
          .countdown_annoucement_bar_wrapper_${e.id} {
            padding: 7px;
            column-gap: 10px;
            row-gap: 7px;
          }

          span.countdown_time_${e.id} {
            font-size: ${Math.floor(.8*n.timerSize)}px;
            padding-top: ${t?0:"2px"};
          }

          div.countdown_legend_${e.id} {
            font-size: ${Math.floor(.8*n.legendSize)}px;
          }

          .countdown_annoucement_bar_title_${e.id}.h2 {
            font-size: ${Math.floor(.8*n.titleSize)}px;
          }

          .countdown_annoucement_bar_subheading_${e.id} {
            font-size: ${Math.floor(.8*n.subheadingSize)}px;  
          }
        
          .countdown_annoucement_bar_cta_${e.id}, .countdown_annoucement_bar_cta_${e.id}:visited  {
            padding: 6px 14px;
            line-height: 1.5;
            font-size: ${Math.floor(.9*n.buttonFontSize)}px;
          }
        }`})(t)}
      
        @media (max-width: 430px) {
          .countdown_annoucement_bar_wrapper_${t.id} {
            justify-items: center;
            text-align: center;
            padding: 10px 15px;
          }

          .countdown_annoucement_bar_close_button_${t.id} {
            position: absolute;
            padding: 0;
            transform: none;
            top: 5px;
            right: 5px;
          }

          .countdown_annoucement_bar_title_${t.id}.h2 {
              text-align: center;
          }
        }

        ${a(t,"top-bar")}
    `;o(l)}(e);let u=document.createElement("div");u.className=`essential_countdown_annoucement_bar_wrapper countdown_annoucement_bar_wrapper_${e.id}`,"top-page"===e.style.position&&e.style.stickyBar&&(u.className+=" top_page"),"bottom-page"===e.style.position&&(u.className+=" bottom_page"),"clickable"===e.CTAType&&e.CTALink&&(u.className+=" clickable",u.setAttribute("onclick",`essentialCountdownCloseAnnouncementBarOnClick(event, "${e.CTALink}")`));let m=document.createElement("p");m.className+=`countdown_annoucement_bar_title_${e.id} h2`,m.textContent+=e.title;let g=document.createElement("p");g.className=`countdown_annoucement_bar_subheading_${e.id}`,g.textContent+=e.subheading;let $=document.createElement("div");$.append(m),$.append(g);let f=document.createElement("div"),h=document.createElement("a");h.className=`countdown_annoucement_bar_cta_${e.id}`,h.setAttribute("href",e.CTALink),h.textContent+=e.buttonText;let w=document.createElement("button");w.className=`countdown_annoucement_bar_close_button_${e.id}`,w.setAttribute("onclick",`essentialCountdownCloseAnnouncementBar("${e.id}", "${e.updatedAt}")`),w.append(function e(t){let n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("width",12),n.setAttribute("height",12),n.setAttribute("fill","none"),o.setAttribute("d","m7.414 6 4.293-4.293A.999.999 0 1 0 10.293.293L6 4.586 1.707.293A.999.999 0 1 0 .293 1.707L4.586 6 .293 10.293a.999.999 0 1 0 1.414 1.414L6 7.414l4.293 4.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L7.414 6Z"),o.setAttribute("fill",t),n.append(o),n}(e.style.closeIconColor)),u.append($),u.append(f),"button"===e.CTAType&&u.append(h),e.closeButton&&u.append(w);let b=document.querySelector(".essential-countdown-top-bar");b?b.append(u):t?t.append(u):document.querySelector("body").prepend(u),s(f,e)}async function g(e,t,n){if(n&&e.productTags&&e.productTags.length>0){let o=window.essentialProductTags||[],r=o.map(e=>e.toLowerCase()),i=e.productTags.some(e=>r.includes(e.toLowerCase()));if(!i)return!1}let a=document.querySelector(`.countdown_timer_wrapper_${e.id}`);if(a)return;let d=document.createElement("div");d.className=`countdown_timer_wrapper_${e.id}`;let c=document.createElement("h2");c.textContent+=e.title;let p=document.createElement("p");p.className=`countdown_timer_subheading_${e.id}`,p.textContent+=e.subheading;let u=document.createElement("div");d.append(c),e.subheading&&d.append(p),d.append(u),l(e),t.append(d),s(u,e)}function $(e,t,n=!0){let o=document.createElement("div");o.className=`countdown_timer_wrapper_${e.id}`;let r=document.createElement("h2");r.textContent+=e.title;let i=document.createElement("p");i.className=`countdown_timer_subheading_${e.id}`,i.textContent+=e.subheading;let a=document.createElement("div");"clickable"===e.CTAType&&e.CTALink&&(o.className+=" clickable",o.setAttribute("onclick",`essentialCountdownCloseAnnouncementBarOnClick(event, "${e.CTALink}")`));let d=document.createElement("a");d.className=`countdown_timer_bar_cta_${e.id}`,d.setAttribute("href",e.CTALink),d.textContent+=e.buttonText,o.append(r),o.append(i),o.append(a),"button"===e.CTAType&&o.append(d),l(e),n?t.append(o):t.prepend(o),s(a,e)}async function f(e,t,n){let a=await getCartEssentialApps();if(a&&a.item_count<1){try{window.localStorage.removeItem(`essentialCountdownTimer-${e.id}`)}catch(l){console.log(l)}return}let d=document.querySelector(".essential_countdown_cart_page_timer");if(d)return;let s=document.createElement("div");s.className=`essential_countdown_cart_page_timer countdown_cart_page_timer_wrapper_${e.id} essential_countdown_timer`;let p=document.createElement("div");s.append(p),t&&t.prepend(s),function e(t){let n=t.style,r="gradientBackground"===n.backgroundType?`linear-gradient(${n.gradientTurn}deg, ${n.gradientStart}, ${n.gradientEnd})`:n.singleColor,a=`
        .countdown_cart_page_timer_wrapper_${t.id} {
            ${i(n)}background: ${r};
            margin-top: ${n.outsideTopSpacing}px;
                margin-bottom: ${n.outsideBottomSpacing}px;
                padding-top: ${n.insideTopSpacing}px;
                padding-bottom: ${n.insideBottomSpacing}px;
                padding-left: 10px;
                padding-right: 10px;
              
            border-radius: ${n.borderRadius}px;
            border: ${n.borderColor} solid ${n.borderSize}px;
            text-align: center;
            flex:auto;
            align-items: center;
        }
    
        .countdown_cart_page_timer_wrapper_${t.id} .h2 {
          ${i(n)}font-weight: bold;
          font-size: ${n.titleSize}px;
          color: ${n.titleColor};
          margin: 0;
          padding: 0;
          line-height: 1.2;
          letter-spacing: normal;
          text-transform: none;
          white-space: break-spaces;
        }
    
        .countdown_wrapper_${t.id} {
          white-space: nowrap;
        }

        .countdown_time_${t.id} {
          ${i(n)}color: ${n.timerColor};
          font-weight: bold;
          font-size: ${n.timerSize}px;
          line-height: 1;
          font-feature-settings: 'tnum';
          font-variant-numeric: tabular-nums;
        }`;o(a)}(e),function e(t,n,o){let r=Number(new Date().getTime()),i,a={};try{i=window.localStorage.getItem(`essentialCountdownTimer-${n.id}`)}catch(l){console.log(l)}if(i){try{let d=JSON.parse(i);a={...a,...d}}catch(s){console.log(s)}a&&a.id===n.id&&a.updatedAt!==n.updatedAt&&(window.localStorage.removeItem(`essentialCountdownTimer-${n.id}`),i=null,a={...a,userDistance:null})}i&&parseInt(a.sessionCurrentDate)+6e4*n.fixedMinutes>r&&(r=parseInt(a.sessionCurrentDate)),u(c(r,a.userDistance,n,o),t,n);let p=setInterval(()=>{let e=c(r,a.userDistance,n,o);(n.repeat||"repeat"===n.onceItEnds)&&"fixedMinutes"===n.timerType&&!e?(a={...a,userDistance:0},r=Number(new Date().getTime())):e||clearInterval(p),u(c(r,a.userDistance,n,o),t,n)},1e3)}(p,e,a),n||setTimeout(()=>{r()},700)}function h(){let e,t=window.Shopify.routes.root||"/",n=document.querySelector(`form[action="${t}cart"]`),o=document.querySelectorAll(".side-cart"),r=document.querySelector(".countdown-timer-side-cart");return n&&"cart-notification-form"===n.getAttribute("id")&&(n=null),r?e=r:n?e=n:o.length>0&&(e=o[o.length-1]),e}function w(e){if(e.startDate&&"fixedMinutes"!==e.timerType){let t=Number(new Date().getTime()),n=Number(C(e.startDate).getTime()),o=Number(C(e.endDate).getTime()),r=b(e)&&"today"===e.startType?n:Number(new Date(e.startDate).getTime());return(!b(e)||"today"!==e.startType||!(n>o))&&!(t>=r)}return!1}function b(e){return"recurring"===e.timerType}function y(e){if("do-nothing"===e.onceItEnds||"custom-title"===e.onceItEnds)return!0;let t=Number(new Date().getTime()),n=Number(C(e.startDate).getTime()),o=Number(C(e.endDate).getTime());return n<o?n<t&&t<o:n<t&&t<o+864e5}function x(e){let t=new Date().getDay();return!e.recurringDays||!(e.recurringDays.length>0)||e.recurringDays.includes(t)}function C(e){let t=new Date,n=new Date(e).getHours(),o=new Date(e).getMinutes(),r=new Date(e).getSeconds();return t.setHours(n),t.setMinutes(o),t.setSeconds(r),t}!function o(){let r,i=window.location&&window.location.pathname.includes("/products/"),a=window.location&&window.location.pathname.includes("/collections/"),l=window.location&&window.location.pathname.includes("/password"),d=window.location&&window.location.pathname.includes("/cart"),c=document.querySelectorAll('form[action="/cart/add"]'),s=document.querySelector("#MainContent"),p=document.querySelector("main"),u=document.querySelector("form#contact_form"),C=document.querySelector(".essential-countdown-timer-placement"),T=s||p;if(c&&0===c.length){let S=document.querySelectorAll("form[action]");c=Array.from(S).filter(e=>e.getAttribute("action").includes("/cart/add"))}if(d){let _=window.Shopify.routes.root||"/",N=document.querySelectorAll(`form[action="${_}cart"]`),A=N[N.length-1];A&&(r=A.parentNode)}let E=document.querySelectorAll("div.countdown-timer-block"),v=[],k=(e,n,o,r)=>{if(e.type!==n||o&&"custom"===e.timerPlacement||r&&e.productTags&&e.productTags.length>0)return!1;if(e.showOnProducts&&0!==e.showOnProducts.length){let i=decodeURI(window.location.pathname),a=window.meta&&window.meta.product,l=e.showOnProducts.find(e=>a&&a.gid?a.gid===e.id:"function"==typeof i.endsWith?i.endsWith(`products/${e.handle}`):i.includes(`products/${e.handle}`));if(!l)return!1}if(e.showOnProductsInCollections&&0!==e.showOnProductsInCollections.length){let d=t.productCollections||[],c=e.showOnProductsInCollections.find(e=>{let t=Number(e.id.split("/").pop());return d.some(e=>e.id===t)});if(!c)return!1}return!(w(e)||b(e)&&!x(e)||b(e)&&!y(e))},z=(e,t,n)=>{if(e.type!==t||n&&"custom"===e.timerPlacement||n&&"password-page"===e.timerPlacement)return!1;if(e.showOnCollections&&0!==e.showOnCollections.length){let o=decodeURI(window.location.pathname),r;if(!(r="american-uncle-alpha.myshopify.com"===Shopify.shop||"89be57-2.myshopify.com"===Shopify.shop||"anbernicbrazil.myshopify.com"===Shopify.shop?essentialCollectionId&&e.showOnCollections.find(e=>e.id.includes(essentialCollectionId)):e.showOnCollections.find(e=>o.includes(`collections/${e.handle}`))))return!1}return!(w(e)||b(e)&&!x(e)||b(e)&&!y(e))},D=(e,t,n)=>!(e.type!==t||n&&""===e.timerPlacement||e.timerPlacement&&"password-page"!==e.timerPlacement||w(e)||b(e)&&!x(e)||b(e)&&!y(e)),q=(e,t,n)=>e.type===t&&(!n||"custom"!==e.timerPlacement);E&&E.length>0&&(v=Array.from(E).filter(e=>e&&""!==e.getAttribute("countdown-timer-id"))),n().then(async t=>{if(t&&!Array.isArray(t)&&0===t.length)return null;let n=t.reduce((e,t)=>t.showInCountries&&t.showInCountries.length?[...e,...t.showInCountries]:e,[]),o=t.find(e=>e.locationType&&"on-countries"===e.locationType),s=t.filter(t=>{if(!o||!(n.length>0))return t;if("on-countries"===t.locationType){if(!e)return;return t.showInCountries.includes(e)}if(!n.includes(e))return t});s.forEach(e=>{if(e.translations&&e.translations.length>0){let t=e.translations.find(e=>e.locale===Shopify?.locale);t&&Object.assign(e,t)}});let p=s.filter(e=>"top-bar"===e.type),w=s.find(e=>"cart-page"===e.type);if(p.forEach(e=>{e&&"custom"!==e.timerPlacement&&k(e,"top-bar")&&z(e,"top-bar")&&m(e)}),v.forEach(e=>{let t=e.getAttribute("countdown-timer-id"),n=s.find(e=>e.id===t&&"top-bar"===e.type);n&&k(n,"top-bar")&&z(n,"top-bar")&&m(n,e)}),(v=v.filter(e=>{let t=e.getAttribute("countdown-timer-id"),n=s.find(e=>e.id===t);return!n||!!n&&n?.type!=="top-bar"})).forEach(e=>{let t=e.getAttribute("countdown-timer-id"),n=s.find(e=>e.id===t);n&&k(n,"product-page")&&g(n,e,!0),n&&z(n,"landing-page")&&$(n,e),n&&"cart-page"===n.type&&f(n,e)}),0===v.length&&i&&(c&&c.length>0||C)){let b,y;y=C||c[c.length-1];let x=s.find(e=>e.productTags&&e.productTags.length>0),S;if(x){let _=window.essentialProductTags||[],N=_.map(e=>e.toLowerCase());S=s.filter(e=>e.productTags.some(e=>N.includes(e.toLowerCase())))}(b=S&&S.length>0?S.find(e=>k(e,"product-page",!0)):s.find(e=>k(e,"product-page",!0,!0)))&&(Shopify?.theme?.name&&Shopify.theme.name.toLowerCase().includes("debutify")&&b.createdAt&&new Date(b.createdAt).getTime()>1698142755e3&&!C&&(y=document.querySelector("form.product-single__form")),g(b,y))}if(0===v.length&&a&&T){let A;(A=s.find(e=>z(e,"landing-page",!0)))&&$(A,T,!1)}if(0===v.length&&l&&u){let E;(E=s.find(e=>D(e,"landing-page",!0)))&&$(E,u)}if(0===v.length&&d){let I=s.find(e=>q(e,"cart-page",!0));r&&I&&f(I,r)}if(h()&&w&&!d){let B=h();if(B&&"custom"!==w.timerPlacement){f(w,B);let O=new MutationObserver(()=>{let e=document.querySelector(`.countdown_cart_page_timer_wrapper_${w.id}`);!e&&h()&&f(w,h(),!0)});if(!window.sideCartObserver&&B){let L;L=B.parentNode.parentNode.parentNode.parentNode&&"BODY"!==B.parentNode.parentNode.parentNode.parentNode.tagName&&"HTML"!==B.parentNode.parentNode.parentNode.parentNode.tagName?B.parentNode.parentNode.parentNode.parentNode:B.parentNode.parentNode.parentNode&&"BODY"!==B.parentNode.parentNode.parentNode.tagName&&"HTML"!==B.parentNode.parentNode.parentNode.tagName?B.parentNode.parentNode.parentNode:B.parentNode.parentNode&&"BODY"!==B.parentNode.parentNode.tagName&&"HTML"!==B.parentNode.parentNode.tagName?B.parentNode.parentNode:B.parentNode,window.cartTimerObserver=O,O.observe(L,{childList:!0,subtree:!0}),window.sideCartObserver=!0}}}if(!h()&&!d&&w)try{(timerSession=window.localStorage.getItem(`essentialCountdownTimer-${w.id}`))&&f(w,!1)}catch(M){console.log(M)}})}()}();