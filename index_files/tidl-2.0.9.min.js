/* tidl-2.0.9.min.js (241003347)
 * Copyright (C) TAGinstall, Easy Tag <https://taginstall.com> - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Radi Danchev <support@taginstall.com>, 2019 - 2024 */
!function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},t.apply(this,arguments)}function r(t,r){if(null==t)return{};var e,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)e=a[n],r.indexOf(e)>=0||(i[e]=t[e]);return i}function e(t){return void 0===t}function n(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}var i,a,o,c,u,s,d,l,v,m=["id","first_name","last_name","email","orders_count","total_spent","address1","address2","city","country","country_code","phone","province","zip","tags"],f=["line_item_id","sku","compare_at_price","total_discount","product_id","variant_id","position"],p=["sku","price","compare_at_price","brand","category","variant","quantity","list","product_id","variant_id","name","image"],_=["line_item_id","handle","variants","sku","compare_at_price","total_discount","product_id","variant_id","position"],g=["line_item_id","handle","variants","sku","compare_at_price","total_discount","product_id","variant_id","position"],h=["line_item_id","handle","variants","sku","compare_at_price","total_discount","product_id","variant_id"],y=["line_item_id","handle","variants","sku","compare_at_price","total_discount","product_id","variant_id","position"],w=["line_item_id","handle","variants","sku","compare_at_price","total_discount","product_id","variant_id","position"],k=["marketing"],C=["line_item_id","sku","name","brand","category","variant","position"],I=["line_item_id","handle","variants","sku","name","brand","category","variant","compare_at_price","total_discount","position"];function b(t,r){return t}function S(t){switch(t){case"cart":return"Cart Page";case"collection":return"Collection Page";case"customers/account":case"account":return"Account Page";case"index":return"Home Page";case"product":return"Product Page";case"search":return"Search Results";case"purchase":return"orderThankYouPage"}return"Other Page"}function P(e){var n=e.id,i=e.first_name,a=e.last_name,o=e.email,c=e.orders_count,u=e.total_spent;return{customer:t({id:n,firstName:i,lastName:a,email:o},void 0!==c&&{ordersCount:c},void 0!==u&&{totalSpent:u},{address1:e.address1,address2:e.address2,city:e.city,country:e.country,countryCode:e.country_code,phone:e.phone,province:e.province,zip:e.zip,tags:e.tags},r(e,m))}}function A(e,n){var i=e.items;return{cartTotal:e.total,ecommerce:{actionField:{list:"Shopping Cart"},currencyCode:e.currency,impressions:i.map((function(e){var i=n(e);return e.line_item_id,t({id:i||"",sku:e.sku||"",compareAtPrice:e.compare_at_price,totalDiscount:e.total_discount,productId:e.product_id,variantId:e.variant_id,position:e.position+1},r(e,f))}))}}}function R(e,n){var i=e.items,a=e.list,o=e.currency,c=e.query,u=i.map((function(e){var i=n(e);e.line_item_id;var o=e.handle;e.variants;var c=e.sku;e.compare_at_price,e.total_discount;var u=e.product_id,s=e.variant_id,d=e.position,l=r(e,_);return t({id:i||"",sku:c||"",list:a,productId:u,variantId:s,position:d+1,handle:o},l)}));return t({},void 0!==c&&{query:c},{ecommerce:{currencyCode:o,impressions:u}})}function j(e,n){var i=e.items,a=e.list,o=e.currency,c=i.map((function(e){var i=n(e);e.line_item_id;var o=e.handle;e.variants;var c=e.sku;e.compare_at_price,e.total_discount;var u=e.product_id,s=e.variant_id,d=e.position,l=r(e,g);return t({id:i||"",sku:c||"",list:a,productId:u,variantId:s,position:d+1,handle:o},l)}));return{ecommerce:{currencyCode:o,click:{actionField:{list:a},products:c}}}}function D(e,n){var i=e.items,a=e.list,o=e.currency,c=i.map((function(e){var i=n(e);e.line_item_id;var o=e.handle;e.variants;var c=e.sku,u=e.compare_at_price;e.total_discount;var s=e.product_id,d=e.variant_id,l=r(e,h);return t({id:i||"",sku:c||"",list:a,productId:s,variantId:d,compareAtPrice:u,handle:o},l)}));return{ecommerce:{currencyCode:o,detail:{actionField:{list:a},products:c}}}}function O(e,n){var i=e.items,a=e.list,o=e.currency,c=a,u=i.map((function(e){var i=n(e);e.line_item_id,e.handle,e.variants;var o=e.sku,u=e.compare_at_price;e.total_discount;var s=e.product_id,d=e.variant_id,l=e.position,v=r(e,y);return e.list&&(c=e.list),t({id:i||"",sku:o||"",list:a,productId:s,variantId:d,compareAtPrice:u,position:l+1},v)}));return{ecommerce:{currencyCode:o,add:{actionField:{list:c},products:u}}}}function N(e,n){var i=e.items,a=e.list,o=e.currency,c=a,u=i.map((function(e){var i=n(e);e.line_item_id,e.handle,e.variants;var o=e.sku,u=e.compare_at_price;e.total_discount;var s=e.product_id,d=e.variant_id,l=e.position,v=r(e,w);return e.list&&(c=e.list),t({id:i||"",sku:o||"",list:a,productId:s,variantId:d,compareAtPrice:u,position:l+1},v)}));return{ecommerce:{currencyCode:o,remove:{actionField:{list:c},products:u}}}}function T(e){var n=e.marketing;return t({customer:r(e,k)},void 0!==n&&{marketing:n})}function q(e,n){var i=e.items,a=e.total;return{ecommerce:{currency:e.currency,value:a,items:i.map((function(e){var i=n(e);return e.line_item_id,t({item_id:i||"",item_sku:e.sku||"",item_name:e.name,item_brand:e.brand,item_category:e.category,item_variant:e.variant,index:e.position},r(e,C))}))}}}function x(e,n){var i=e.items,a=e.list,o=e.currency,c=e.search_query,u=i.map((function(e){var i=n(e);e.line_item_id,e.handle,e.variants;var o=e.sku,c=e.name,u=e.brand,s=e.category,d=e.variant;e.compare_at_price,e.total_discount;var l=e.position,v=r(e,I);return t({item_id:i||"",item_sku:o||"",item_name:c,item_brand:u,item_category:s,item_variant:d,item_list_name:a},void 0!==l&&{index:l},v)}));return{ecommerce:t({currency:o,items:u},void 0!==c&&{search_query:c})}}var F="_shopify_y",L="product",E=((i={}).collections="collection_view",i.product="product_detail_view",i.product_click="product_click",i.add_to_cart="add_to_cart",i.remove_from_cart="remove_from_cart",i.search="search_results",i.login="login",i.register="register",i.cart="view_cart",i.cart_data="cart_data",i.purchase="purchase",i.checkout="checkout",i.user_data="user_data",i.device_data="device_data",i),U=((a={}).collections="collectionView",a.product="productDetailView",a.product_click="productClick",a.add_to_cart="addToCart",a.remove_from_cart="removeFromCart",a.search="searchResults",a.login="login",a.register="register",a.cart="viewCart",a.cart_data="cartData",a.purchase="transactionComplete",a.checkout="checkout",a.user_data="userData",a.device_data="deviceData",a.context_data="contextData",a),J=((o={}).collections="view_item_list",o.product="view_item",o.product_click="select_item",o.add_to_cart="add_to_cart",o.remove_from_cart="remove_from_cart",o.search="search_results",o.login="login",o.register="sign_up",o.cart="view_cart",o.cart_data="cart_data",o.purchase="purchase",o.checkout="checkout",o.user_data="user_data",o.device_data="device_data",o.context_data="contextData",o),z=((c={}).collections=R,c.product=D,c.product_click=j,c.add_to_cart=O,c.remove_from_cart=N,c.search=R,c.login=P,c.register=P,c.cart=A,c.cart_data=A,c.purchase=function(e,n){var i=e.items,a=e.customer,o=e.currency,c=e.action_field,u=c.id,s=c.order_name,d=c.affiliation,l=c.revenue,v=c.subtotal,m=c.tax,f=c.shipping,_=c.coupon,g=c.total_discount,h=c.items_count,y=c.shipping_method,w=c.payment_method,k=Array.isArray(i)?i.map((function(e,i){return t({id:n(e)||"",sku:e.sku,price:e.price,compareAtPrice:e.compare_at_price,brand:e.brand,category:e.category,variant:e.variant,quantity:e.quantity,list:e.list,productId:e.product_id,variantId:e.variant_id,name:e.name,position:i+1,image:e.image},r(e,p))})):[];return t({ecommerce:{currencyCode:o,purchase:{actionField:{id:u,orderId:u,orderName:s,affiliation:d,revenue:l,subtotal:v,tax:m,shipping:f,coupon:_,totalDiscount:g,itemsCount:h,shippingMethod:y,paymentMethod:w},products:k}}},a?{customerType:"loggedIn",customerId:a.id,customerFirstName:a.first_name,customerLastName:a.last_name,customerEmail:a.email,customerOrdersCount:a.orders_count,customerTotalSpent:a.total_spent,customerAddress1:a.address1,customerAddress2:a.address2,customerCity:a.city,customerCountry:a.country,customerCountryCode:a.country_code,customerPhone:a.phone,customerProvince:a.province,customerZip:a.zip,hashedCustomerFirstName:a.hashed_first_name,hashedCustomerLastName:a.hashed_last_name,hashedCustomerEmail:a.hashed_email}:{customerType:"guest"})},c.checkout="checkout",c.user_data=P,c.device_data=b,c.context_data=function(t){var r=t.page,e={};return"object"==typeof r&&r.type&&(e={pageType:S(r.type),page:{type:S(r.type),title:document.title}}),e},c),B=((u={}).collections=R,u.product=D,u.product_click=j,u.add_to_cart=O,u.remove_from_cart=N,u.search=R,u.login=P,u.register=P,u.cart=A,u.cart_data=A,u.purchase="purchase",u.checkout="checkout",u.user_data=P,u.device_data=b,u.context_data=b,u),G=((s={}).collections=x,s.product=x,s.product_click=x,s.add_to_cart=x,s.remove_from_cart=x,s.search=x,s.login=T,s.register=T,s.cart=q,s.cart_data=q,s.purchase="purchase",s.checkout="checkout",s.user_data=T,s.device_data=b,s.context_data=b,s),M=((v={}).events=((d={}).add_to_cart=!0,d.cart=!0,d.cart_data=!0,d.checkout=!0,d.collections=!0,d.device_data=!0,d.login=!0,d.product=!0,d.product_click=!0,d.purchase=!0,d.remove_from_cart=!0,d.search=!0,d.register=!0,d.user_data=!0,d),v.data_layer=((l={}).name="dataLayer",l.prefix="",l.model="legacy",l.item_id_selector="sku|variant_id",l),v.consent=!0,v.currency="",v.debug=!1,v);function V(r,n,i,a,o,c,u){var s=window[i]=window[i]||[];e(o)&&(o="legacy");var d=function(t){switch(t){case"eec":return E;case"ga4":return J}return U}(o),l=function(t){switch(t){case"eec":return B;case"ga4":return G}return z}(o),v=t({event:a+d[r]},l[r](n,(function(t){for(var r,e=c.split("|"),n=0;n<e.length;n++){var i=e[n];if(t.hasOwnProperty(i)&&t[i]){r=t[i];break}}return r})));u&&(v.eventId=window.crypto.randomUUID(),v.timestamp=(new Date).toISOString()),s.push(v)}function H(t){var r=function(){for(var t=document.cookie.split(";"),r={},e=0;e<t.length;e++){var n=t[e].split("=");r[String(n[0]).trim()]=decodeURIComponent(n.slice(1).join("="))}return r}();if("object"==typeof r)return r[t]}var Y=Array.isArray,Z="__ti",K="shopify",Q={cart:K.concat(Z,"c"),cookies:K.concat(Z,"bc"),params:K.concat(Z,"p"),user_id:K.concat(Z,"u"),list:K.concat(Z,"l"),loggedIn:K.concat(Z,"in"),willRegister:K.concat(Z,"wr")};function W(t){var r,e;try{r=localStorage.getItem(Q[t])}catch(t){}if(r)try{e=JSON.parse(r)}catch(t){e=r}return e}function X(t,r){var e;if(void 0!==(e=n(r)||Y(r)?JSON.stringify(r):r))try{localStorage.setItem(Q[t],e)}catch(t){}}function $(){return Array.prototype.slice.call(document.querySelectorAll('a[href*="/products/"]'))}function tt(t){return t.map((function(t){return new URL(t.href,location.origin).pathname.split("/").slice(-1)[0]}))}var rt=["sca_attr_cart"];function et(t,r,e,n){var i=!1;rt.forEach((function(r){-1!==t.indexOf(r)&&(i=!0)}));var a="POST"===r.toUpperCase()&&e>=200&&e<300,o=-1!==t.indexOf(n.concat("/add"))||-1!==t.indexOf(n.concat("/update"))||-1!==t.indexOf(n.concat("/change"))||-1!==t.indexOf(n.concat("/clear"));return!i&&a&&o}function nt(r,e,n){var i=[],a=[],o=[];return r.forEach((function(r){var n=!1;e.forEach((function(e){r.variant_id===e.variant_id&&(n=!0,o.push(t({},e,{list:r.list})),r.quantity<e.quantity?i.push(t({},r,{price:e.price,discount:e.discount,total_discount:e.total_discount,coupon:e.coupon,quantity:e.quantity-r.quantity})):r.quantity>e.quantity&&a.push(t({},r,{quantity:r.quantity-e.quantity})))})),n||a.push(r)})),e.forEach((function(e){var a=!1;r.forEach((function(t){t.variant_id===e.variant_id&&(a=!0)})),a||(o.push(t({},e,{list:n})),i.push(e))})),{add:i,remove:a,store:o}}var it=["items"],at=["items"],ot=["items"],ct=["items"],ut={};function st(t,r){var e;t&&"object"==typeof t&&dt(ut.options,t),ut.iss=!!t.write_key,function(t){var r=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n[0],o=n[1];return this.addEventListener("readystatechange",(function(){4===this.readyState&&et(o,a,this.status,"/cart")&&t(JSON.parse(this.response))})),r.apply(this,arguments)}}(e=function(t){return r=yt,e=wt,void fetch("/cart.js").then((function(t){return t.json()})).then((function(t){var r=W("cart")||[],e=W("list");return{rawCartData:t,cartDiffs:nt(r,t.items.map((function(t,r){var e="";if(t.line_level_discount_allocations.length){var n=t.line_level_discount_allocations[0];n.discount_application&&n.discount_application.title&&(e=n.discount_application.title)}return{name:t.product_title,brand:t.vendor,category:t.product_type,variant:t.variant_title||t.variant_options&&t.variant_options[0],price:String(t.final_price/100),discount:String((t.price-t.final_price)/100),total_discount:String(t.line_level_total_discount/100),coupon:e,quantity:t.quantity,position:r,sku:t.sku,product_id:t.product_id&&String(t.product_id),variant_id:t.variant_id&&String(t.variant_id),image:t.image}})),e?e.name:"")}})).then((function(t){t.rawCartData;var n=t.cartDiffs,i=W("list"),a=i?i.name:"";n.add.length>0&&r({items:n.add,list:a}),n.remove.length>0&&e({items:n.remove}),X("cart",n.store)}));var r,e}),function(t,r,e){"function"==typeof r&&(t.fetch=function(){var t,n=r.apply(this,arguments),i=arguments[0],a=arguments[1],o=null!=(t=null==a?void 0:a.method)?t:i instanceof Request?i.method:"GET",c=i instanceof Request?i.url:i instanceof URL?i.toString():i;return n.then((function(t){et(c,o,t.status,"/cart")&&t.clone().json().then((function(t){return e(t)}))})),n})}(window,window.fetch,e),V("context_data",r.contextData,ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss),"loading"===document.readyState||"interactive"===document.readyState?document.addEventListener("readystatechange",(function(t){"interactive"===document.readyState?lt():"complete"===document.readyState&&(lt(),vt(),mt(r.userData),r.cartData&&kt(r.cartData),r.search&&Ct(r.search),r.collectionData&&_t(r.collectionData),r.productData&&ht(r.productData),r.checkout&&r.checkout,r.purchaseData&&pt(r.purchaseData))})):(lt(),vt(),mt(r.userData),r.cartData&&kt(r.cartData),r.search&&Ct(r.search),r.collectionData&&_t(r.collectionData),r.productData&&ht(r.productData),r.checkout&&r.checkout,r.purchaseData&&pt(r.purchaseData))}function dt(t,r){Object.keys(r).forEach((function(e){t.hasOwnProperty(e)&&(n(r[e])?dt(t[e],r[e]):t[e]=r[e])}))}function lt(){var t=W("user_id");if(e(t)||!ft(t)){var r=H(F);X("user_id",t=null!=r?r:window.crypto.randomUUID())}}function vt(){if(ut.options.events.device_data){var t=window.navigator;V("device_data",{encoding:document.characterSet,language:t.browserLanguage||t.language,screen:window.screen.width+"x"+window.screen.height,viewport:document.body.clientWidth+"x"+document.body.clientHeight,colordepth:screen.colorDepth},ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}function mt(r){if(ut.options.events.user_data){var n,i,a,o=Boolean(W("loggedIn")),c=Boolean(W("willRegister")),u="user_data";"/account/register"===location.pathname&&X("willRegister",!0),"/account/login"===location.pathname&&X("willRegister",!1);var s={};e(r)?(s={type:"guest"},o&&X("loggedIn",!1)):(s=t({type:"account"},r),c?(u="register",X("willRegister",!1),X("loggedIn",!0)):o||location.pathname.includes("checkouts")||(X("loggedIn",!0),u="login")),s.consent=null!=(n=null==(i=window.Shopify)||null==(a=i.customerPrivacy)?void 0:a.userCanBeTracked())?n:"",s.user_id=function(){var t=W("user_id");if(e(t)||!ft(t)){var r=H(F);return X("user_id",t=null!=r?r:window.crypto.randomUUID()),t}return t}();var d=W("cookies"),l=W("params");s.internal={c:d,a:l},V(u,s,ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}function ft(t){return"string"==typeof t&&t.includes("-")}function pt(e){if(ut.options.events.purchase&&e&&n(e)){var i=e.items,a=r(e,it),o=i,c=W("cart");c&&Array.isArray(c)&&c.length>0&&i&&Array.isArray(i)&&i.length>0&&(o=i.map((function(r){var e=c.find((function(t){return t.variant_id===r.variant_id}));return t({},r,void 0!==e&&{list:e.list})}))),X("cart",[]),X("list",{}),V("purchase",t({items:o},a),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}function _t(e){if(ut.options.events.collections&&e&&n(e)){var i,a=e.items,o=r(e,at);e.list&&X("list",{name:e.list,path:null==(i=location)?void 0:i.pathname});var c=$(),u=tt(c),s=0,d=a.reduce((function(r,e){var n=u.find((function(t){return t.split("?")[0]===e.handle}));return n&&(r.find((function(t){return t.handle===n.handle}))||r.push(t({},e,{position:s++}))),r}),[]);ut.options.events.product_click&&gt(c,d,o),V("collections",t({items:d.length>0?d:a},o),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}function gt(r,e,n){r.forEach((function(r){var i=new URL(r.href,location.origin),a=i.pathname.split("/").slice(-1)[0].split("?")[0],o=e.find((function(t){return a===t.handle})),c=i.searchParams.get("variant");if("object"==typeof o){if(c&&o.variants){var u=o.variants.find((function(t){return t.id===c}));u&&(o.variant_id=u.id,o.variant=u.name,o.sku=u.sku)}r.addEventListener("click",(function(){V("product_click",t({items:[o]},n),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}))}}))}function ht(e){if(ut.options.events.product&&e&&n(e)){var i=e.items,a=r(e,ot),o=document.querySelector('form[action^="/cart/add"] select[name="id"]'),c=function(r,e){var n,i=e.variants.find((function(t){return t.id===r}));return i&&((n=t({},e)).variant_id=i.id,n.variant=i.name,n.sku=i.sku,n.price=i.price),n},u=W("list"),s=i[0];if(o&&s.variants&&o.value){var d=c(o.value,s);d&&(s=d),setInterval((function(){var r=c(o.value,s);r&&r.variant_id!==s.variant_id&&V(L,t({items:[s=r],list:u?u.name:""},a),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}),500)}V(L,t({items:[s],list:u?u.name:""},a),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}function yt(r){ut.options.events.add_to_cart&&V("add_to_cart",t({},r,{currency:ut.options.currency}),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}function wt(r){ut.options.events.remove_from_cart&&V("remove_from_cart",t({},r,{currency:ut.options.currency}),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}function kt(r,e){var n=yt,i=wt,a=W("list"),o=a?a.name:"",c=r||{},u=nt(W("cart")||[],c.items||[],o);u.add.length>0&&n({items:u.add,list:o}),u.remove.length>0&&i({items:u.remove}),X("cart",u.store),ut.options.events.cart_data&&V("cart"===e?"cart":"cart_data",t({},c,{items:u.store}),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}function Ct(e){if(ut.options.events.search&&e&&n(e)){var i="Search results";X("list",{name:i,path:location&&location.pathname}),e.list=i;var a=e.items,o=r(e,ct),c=$(),u=tt(c),s=0,d=a.reduce((function(r,e){var n=u.find((function(t){return t.split("?")[0]===e.handle}));return n&&(r.find((function(t){return t.handle===n.handle}))||r.push(t({},e,{position:s++}))),r}),[]);ut.options.events.product_click&&gt(c,d,o),V("search",t({items:d.length>0?d:a,list:i},o),ut.options.data_layer.name,ut.options.data_layer.prefix,ut.options.data_layer.model,ut.options.data_layer.item_id_selector,ut.iss)}}new function(t){this.t=void 0,window.TAGinstall=this,this.i={o:void 0},ut.options=M,this.init=st}("TAGinstall")}();
